# MiKo_3008: Return immutable collections

## Cause

A method returns a mutable collection type such as `ICollection<T>` or `IList<T>`.

## Rule description

Methods should avoid returning mutable collections like `ICollection<T>` since these can be modified from outside the method.
Instead, they should return read-only variants like `IReadOnlyCollection<T>`.
This practice ensures data integrity and encapsulation, making the code more secure and predictable.

### Rationale behind

Returning mutable collections breaks encapsulation and allows external code to modify internal state.
This can lead to unexpected behavior, data corruption, and violations of class invariants.

Returning immutable collections provides several important benefits:

- **Better Encapsulation**:
  Classes can protect their internal state from external modifications.
  This ensures that objects maintain their invariants and remain in a valid state.

- **Improved Thread Safety**:
  Immutable collections can be safely shared across threads without synchronization.
  This eliminates a common source of concurrency bugs.

- **Reduced Side Effects**:
  When methods return immutable collections, callers cannot inadvertently modify shared data.
  This makes the code more predictable and easier to reason about.

- **Clearer Intent**:
  Read-only collection types communicate that the data is meant for reading only.
  This makes the API contract explicit and prevents misuse.

- **Easier Debugging**:
  When collections cannot be modified externally, tracking down bugs becomes simpler.
  Developers know the data cannot change unexpectedly after being returned.

## How to fix violations

To fix a violation of this rule, change the return type to an immutable collection interface such as `IReadOnlyCollection<T>`, `IReadOnlyList<T>`, or return a defensive copy.

## How to suppress violations

```csharp
#pragma warning disable MiKo_3008
#pragma warning restore MiKo_3008
```
