# MiKo_3060: Do not use Debug.Assert or Trace.Assert

## Cause

Code uses `Debug.Assert()` or `Trace.Assert()` to verify conditions.

## Rule description

Using `Debug.Assert()` or `Trace.Assert()` to ensure something has several drawbacks:

1. `Debug.Assert()` does not work in Release mode, while `Trace.Assert()` does.
2. These assertions only confirm the situation; no action can be taken.
3. There is no failure handling mechanism.
4. Calling code is unaware of the issue and cannot handle it properly.

Instead of using `Debug.Assert()` or `Trace.Assert()`, throw an exception like `InvalidOperationException`.
This provides proper failure handling and informs the calling code.

Never use `Debug.Assert()` or `Trace.Assert()` in (unit) test code.
Let the test fail naturally in cases where these assertions would apply, as that is the purpose of test code.

### Rationale behind

Assertions from Debug and Trace classes are diagnostic tools that were never intended for production error handling.
They create inconsistent behavior between debug and release builds and provide no way for calling code to respond to failures.

Using exceptions instead of assertions provides several important benefits:

- **Consistent Behavior**:
  Exceptions work the same way in both debug and release builds.
  Debug.Assert disappears in release mode, hiding potential problems in production.

- **Proper Error Handling**:
  Exceptions can be caught and handled by calling code.
  Assertions either show dialog boxes (interrupting execution) or write to trace listeners without informing the caller.

- **Clear Failure**:
  Exceptions immediately stop execution and provide stack traces.
  Assertions can be configured to continue execution after failure, leading to cascading errors.

- **API Contracts**:
  Exceptions communicate preconditions and postconditions to callers.
  Assertions are internal diagnostic tools not visible in the API contract.

- **Production Reliability**:
  Exceptions ensure problems are detected in production environments.
  Debug assertions are compiled out, allowing invalid states to propagate.

- **Better Testing**:
  Tests can verify exception behavior using standard assertion libraries.
  Testing assertion behavior requires special configuration and is less reliable.

## How to fix violations

To fix a violation of this rule, replace `Debug.Assert()` or `Trace.Assert()` calls with appropriate exceptions.
Use `ArgumentException` for parameter validation, `InvalidOperationException` for state violations, or other specific exception types.
Include descriptive messages that explain what went wrong.

## How to suppress violations

```csharp
#pragma warning disable MiKo_3060
#pragma warning restore MiKo_3060
```
