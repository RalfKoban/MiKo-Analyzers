# MiKo_0005: Keep local functions small

## Cause

A local function contains too many lines of code.

## Rule description

To make code easier to read and maintain, local functions should be kept short.
When a local function becomes too long, it often indicates that it is doing too much and violating the Single Responsibility Principle (SRP) and Single Level of Abstraction (SLoA).

Long local functions are harder to understand and maintain, making the codebase more difficult to work with.

### Rationale behind

Local functions are meant to encapsulate small pieces of logic that are used within a single method.
When a local function becomes too long, it defeats the purpose of using a local function.
Long local functions can make the containing method harder to read overall.

Keeping local functions small provides several important benefits:

- **Improved Readability**:
  Short local functions are easier to read and understand at a glance.
  The containing method becomes more readable when local functions are small and focused.
  Developers can quickly grasp the purpose of each local function without getting lost in implementation details.

- **Easier Testing**:
  While local functions cannot be tested directly, small local functions make the containing method easier to test.
  When local functions are short and focused, the overall logic is simpler to verify.
  Complex logic in local functions often indicates that the code should be extracted to a regular method where it can be tested independently.

- **Better Maintainability**:
  When a local function needs to be changed, a shorter function is easier to modify safely.
  Changes to long local functions are more likely to introduce bugs because there is more code to consider.
  Small local functions make it easier to understand the impact of changes.

- **Clearer Intent**:
  Well-named small local functions act like inline documentation.
  The function name describes what it does, and the small amount of code shows how it works.
  This makes the containing method read more like a series of steps rather than a wall of code.

- **Reduced Cognitive Load**:
  When local functions are small, developers do not need to remember as much information while reading the code.
  This makes it easier to understand how the containing method works and how the local functions contribute to it.
  Long local functions increase mental burden and make the code harder to follow.

- **Better Design Decisions**:
  When a local function grows too large, it signals that the logic might belong in a regular private method.
  This encourages developers to think about code organization and whether the logic has value beyond the single containing method.
  Keeping local functions small maintains clear boundaries between different levels of code organization.

## How to fix violations

To fix a violation of this rule, refactor the local function to make it smaller.
You can do this by:

- Breaking the local function into multiple smaller local functions
- Converting the local function to a regular private method
- Extracting parts of the logic into separate methods with meaningful names
- Reconsidering whether the logic belongs in a local function at all

## How to suppress violations

```csharp
#pragma warning disable MiKo_0005
#pragma warning restore MiKo_0005
```
