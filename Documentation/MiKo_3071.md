# MiKo_3071: Do not return null for Task

## Cause

A method returning `Task` returns `null`.

## Rule description

Methods that return `Task` are intended for async calls.
These methods should never return `null`, as this could lead to a `NullReferenceException`.
Ensuring they do not return `null` keeps the code predictable and safe from unexpected runtime errors, maintaining reliability and smooth functionality.

### Rationale behind

Returning `null` from asynchronous methods violates the expectations that callers have when working with tasks.
When developers call methods returning `Task`, they expect to be able to await the result or use task continuation methods without checking for `null` first.

Avoiding `null` returns for `Task` provides several important benefits:

- **Prevents Runtime Errors**:
  Returning `null` causes `NullReferenceException` when callers attempt to await the task or call methods like `ContinueWith`, `ConfigureAwait`, or access properties like `Result`.
  This creates unpredictable crashes that are difficult to debug.

- **Simplifies Async Code**:
  When methods never return `null`, callers do not need to add defensive `null` checks before awaiting.
  This keeps async code clean and maintains the natural flow of asynchronous operations.

- **Follows Async/Await Conventions**:
  The .NET async/await pattern assumes that `Task` objects are never `null`.
  Following this convention makes the code more predictable and compatible with standard async patterns.

- **Enables Safe Task Composition**:
  Task composition methods like `Task.WhenAll` and `Task.WhenAny` expect non-null tasks.
  Returning valid tasks allows callers to compose operations without worrying about `null` references.

- **Improves Error Handling**:
  When a task cannot be started or completed, a faulted or canceled task should be returned instead of `null`.
  This provides proper error information through the task's exception handling mechanisms.

- **Maintains Thread Safety**:
  Using `Task.CompletedTask` or `Task.FromResult` for synchronous results is thread-safe and performant.
  These approaches eliminate the need for `null` while providing the expected `Task` interface.

## How to fix violations

To fix a violation of this rule, return a completed task instead of `null`.
Use `Task.CompletedTask` for methods returning `Task`, or `Task.FromResult(value)` for methods returning `Task<T>`.
For error cases, use `Task.FromException` or `Task.FromCanceled`.

## How to suppress violations

```csharp
#pragma warning disable MiKo_3071
#pragma warning restore MiKo_3071
```
