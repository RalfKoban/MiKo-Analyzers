# MiKo_5018: Perform value comparisons before reference comparisons

## Cause

A method performs reference comparisons before value comparisons in conditional expressions.

## Rule description

Place value comparisons before reference comparisons. Simple value comparisons are faster than complex reference comparisons, like those involving collections. This approach improves performance.

### Rationale behind

When multiple conditions are evaluated in a logical expression, the order of evaluation matters for performance.
Value type comparisons are significantly faster than reference type comparisons because they involve simple memory operations.
Reference comparisons may require dereferencing pointers, accessing heap memory, or even traversing collections.

By ordering comparisons from fastest to slowest, the code can short-circuit earlier and skip expensive operations when possible.
This is especially important in performance-critical code paths or when the conditions are evaluated frequently.

Performing value comparisons before reference comparisons provides several important benefits:

- **Improved Performance**:
  Value comparisons execute faster than reference comparisons because they operate on simple data types stored directly in memory.
  When a value comparison fails, the remaining expensive reference comparisons can be skipped entirely due to short-circuit evaluation.

- **Reduced Memory Access**:
  Reference comparisons often require accessing heap memory or dereferencing pointers, which is slower than accessing value types on the stack.
  By evaluating value comparisons first, the code minimizes unnecessary memory access operations.

- **Better CPU Cache Utilization**:
  Value types are typically stored in CPU cache or on the stack, making them faster to access.
  Reference types may require fetching data from main memory, which is significantly slower.

- **Optimized Short-Circuit Logic**:
  When using logical AND operations, the evaluation stops as soon as a false condition is found.
  Placing faster value comparisons first maximizes the chance of early termination before reaching slower reference comparisons.

- **Clearer Performance Intent**:
  Ordering comparisons by performance characteristics makes the code's optimization strategy more apparent to other developers.
  This helps maintain performance awareness throughout the codebase.

## How to fix violations

To fix a violation of this rule, reorder the conditional expressions so that value comparisons appear before reference comparisons.

Identify which comparisons involve value types (such as `int`, `bool`, `enum`, or `struct`) and which involve reference types (such as classes, strings, or collections).
Move the value type comparisons to the beginning of the conditional expression.

## How to suppress violations

```csharp
#pragma warning disable MiKo_5018
#pragma warning restore MiKo_5018
```
