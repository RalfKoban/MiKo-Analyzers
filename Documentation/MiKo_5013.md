# MiKo_5013: Do not create empty arrays

## Cause

An empty array is created using `new T[0]` or `new T[] { }`.

## Rule description

Avoid creating empty arrays manually to prevent unnecessary memory consumption and garbage collector pressure.
Use `Array.Empty<T>()` or `[]` instead.
This approach is more efficient.

### Rationale behind

Creating an empty array with `new T[0]` or `new T[] { }` allocates a new array object on the heap every time the code executes.
These empty array objects are identical and could be shared, but each `new` keyword creates a separate instance.
This creates unnecessary garbage for the garbage collector to clean up.

The .NET framework provides `Array.Empty<T>()` which returns a cached singleton instance of an empty array for each type.
Modern C# versions also support `[]` as a shorthand for empty arrays.

Using `Array.Empty<T>()` or `[]` provides important benefits:

- **No Repeated Allocations**:
  `Array.Empty<T>()` returns the same cached instance every time for a given type.
  Creating new arrays with `new T[0]` allocates a new object each time.

- **Reduced Garbage Collection Pressure**:
  Allocating fewer objects means less work for the garbage collector.
  In frequently called code, this can make a measurable performance difference.

- **Better Performance**:
  Returning a cached instance is faster than allocating new memory and initializing an array object.

- **Consistent Code Style**:
  Using `Array.Empty<T>()` or `[]` is the recommended practice in modern .NET code.
  It signals to other developers that the code follows best practices.

- **Lower Memory Usage**:
  Sharing a single instance across all uses of an empty array for a given type reduces the application's memory footprint.

## How to fix violations

To fix a violation of this rule, replace empty array creation with `Array.Empty<T>()` or `[]`.

## How to suppress violations

```csharp
#pragma warning disable MiKo_5013
#pragma warning restore MiKo_5013
```
