# MiKo_3039: Do not use Linq or yield in properties

## Cause

A property uses LINQ operations or yield statements.

## Rule description

Properties using LINQ internally can behave unpredictably when accessed multiple times.
Properties are meant to access fields with some safety checks, so this behavior contradicts their purpose and can cause unwanted side effects.
Instead, use methods to make it clear that the behavior might differ between calls.
This keeps code predictable and maintains the intended functionality.

### Rationale behind

Properties in .NET are designed to appear as simple field accessors, creating the expectation that accessing a property multiple times produces the same result without significant overhead.
LINQ operations and yield statements violate these expectations by introducing deferred execution and potential side effects.

Avoiding LINQ and yield in properties provides several important benefits:

- **Predictable Performance**:
  Properties should be fast operations, but LINQ can involve expensive operations like iteration or filtering.
  Developers expect property access to be cheap and may unknowingly create performance problems.

- **Consistent Results**:
  LINQ with deferred execution can return different results when accessed multiple times if the underlying data changes.
  Properties should return consistent values within a single execution context.

- **No Side Effects**:
  Properties should not have observable side effects, but yield-based properties create new enumerators each time.
  This can lead to unexpected behavior when the property is accessed in loops or multiple times.

- **Debugging Clarity**:
  When properties contain complex LINQ logic, debugging becomes difficult because property evaluation in watch windows can have side effects.
  Simple properties can be safely evaluated during debugging.

- **Memory Efficiency**:
  Yield-based properties create new iterator objects on each access, potentially causing excessive allocations.
  Methods make it clear that a new object is being created.

- **Clear Intent**:
  Methods signal that work is being performed, while properties suggest simple data access.
  Using methods for LINQ operations makes the computational cost obvious to callers.

## How to fix violations

To fix a violation of this rule, convert the property to a method.
If the computation result should be cached, store it in a backing field and expose it through a simple property.
Use method names that clearly indicate that work is being performed.

## How to suppress violations

```csharp
#pragma warning disable MiKo_3039
#pragma warning restore MiKo_3039
```
